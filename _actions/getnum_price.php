<?php 
require "../vendor/autoload.php";
use Libs\MySQL;
use Libs\Num_price;
use Helpers\HTTP;
$num_price = $_POST["dd"];
$select = new Num_price(new MySQL);





$numbers = array(
     
    "num" => "00, 01, 02, 03, 04, 05, 06, 07, 08, 09,10, 11, 12, 13, 14, 15, 16, 17, 18, 19,20, 21, 22, 23, 24, 25, 26, 27, 28, 29,30, 31, 32, 33, 34, 35, 36, 37, 38, 39,40, 41, 42, 43, 44, 45, 46, 47, 48, 49,50, 51, 52, 53, 54, 55, 56, 57, 58, 59,60, 61, 62, 63, 64, 65, 66, 67, 68, 69,70, 71, 72, 73, 74, 75, 76, 77, 78, 79,80, 81, 82, 83, 84, 85, 86, 87, 88, 89,90, 91, 92, 93, 94, 95, 96, 97, 98, 99",
    "0P" => "00, 01, 02, 03 , 04, 05, 06, 07, 08, 09, 10, 20, 30, 40, 50, 60, 70, 80, 90",
    "1P" => "01, 10, 11, 12, 13 , 14, 15, 16, 17, 18, 19, 21, 31, 41, 51, 61, 71, 81, 91",
    "2P" => "02, 20, 21, 22, 23 , 24, 25, 26, 27, 28, 29, 12, 32, 42, 52, 62, 72, 82, 92",
    "3P" => "03, 30, 31, 32, 33 , 34, 35, 36, 37, 38, 39, 13, 23, 43, 53, 63, 73, 83, 93",
    "4P" => "04, 40, 41, 42, 43 , 44, 45, 46, 47, 48, 49, 14, 24, 34, 54, 64, 74, 84, 94",
    "5P" => "05, 50, 51, 52, 53 , 54, 55, 56, 57, 58, 59, 15, 25, 35, 45, 65, 75, 85, 95",
    "6P" => "06, 60, 61, 62, 63 , 64, 65, 66, 67, 68, 69, 16, 26, 36, 46, 56, 76, 86, 96",
    "7P" => "07, 70, 71, 72, 73 , 74, 75, 76, 77, 78, 79, 17, 27, 37, 47, 57, 67, 87, 97",
    "8P" => "08, 80, 81, 82, 83 , 84, 85, 86, 87, 88, 89, 18, 28, 38, 48, 58, 68, 78, 98",
    "9P" => "09, 90, 91, 92, 93 , 94, 95, 96, 97, 98, 99, 19, 29, 39, 49, 59, 69, 79, 89",
    "0T" => "00, 01, 02, 03, 04, 05, 06, 07, 08, 09",
    "1T" => "10, 11, 12, 13, 14, 15, 16, 17, 18, 19",
    "2T" => "20, 21, 22, 23, 24, 25, 26, 27, 28, 29",
    "3T" => "30, 31, 32, 33, 34, 35, 36, 37, 38, 39",
    "4T" => "40, 41, 42, 43, 44, 45, 46, 47, 48, 49",
    "5T" => "50, 51, 52, 53, 54, 55, 56, 57, 58, 59",
    "6T" => "60, 61, 62, 63, 64, 65, 66, 67, 68, 69",
    "7T" => "70, 71, 72, 73, 74, 75, 76, 77, 78, 79",
    "8T" => "80, 81, 82, 83, 84, 85, 86, 87, 88, 89",
    "9T" => "90, 91, 92, 93, 94, 95, 96, 97, 98, 99",
    "0E" => "00, 10, 20, 30, 40, 50, 60, 70, 80, 90",
    "1E" => "01, 11, 21, 31, 41, 51, 61, 71, 81, 91",
    "2E" => "02, 12, 22, 32, 42, 52, 62, 72, 82, 92",
    "3E" => "03, 13, 23, 33, 43, 53, 63, 73, 83, 93",
    "4E" => "04, 14, 24, 34, 44, 54, 64, 74, 84, 94",
    "5E" => "05, 15, 25, 35, 45, 55, 65, 75, 85, 95",
    "6E" => "06, 16, 26, 36, 46, 56, 66, 76, 86, 96",
    "7E" => "07, 17, 27, 37, 47, 57, 67, 77, 87, 97",
    "8E" => "08, 18, 28, 38, 48, 58, 68, 78, 88, 98",
    "9E" => "09, 19, 29, 39, 49, 59, 69, 79, 89, 99",
    "A" => "00, 11, 22, 33, 44, 55, 66, 77, 88, 99",
    "W" => "05, 16, 27, 38, 49, 50, 61, 72, 83, 94",
    "N" => "18, 24, 35, 69, 70, 81, 42, 53, 96, 07",
    
);

$textSplit = str_split($num_price);
 

if(in_array("R", $textSplit)){
     $textR = explode("R", $num_price);
     $kyat = $textR["1"];
    
     $rnum1 = $textSplit[0].$textSplit[1];
     $rnum2 = $textSplit[1].$textSplit[0];
     $rnums = [$rnum1, $rnum2];
     
    
     foreach($rnums  as $rnum){
     $rselections = $select->selectwithnum($rnum);
    
     
     foreach($rselections as $rselection){
          echo "<br>";
          $comms = $rselection->AungAung;
          $newkyat = $comms + $kyat;
         
           $select->updatePrice($newkyat, $rnum);
          
     }
    
     
     }

    
}elseif(in_array("P", $textSplit)){
   $textP = explode("P", $num_price);
   $kyat = $textP["1"];
   
   
     $topnum = $textSplit['0'].$textSplit['1'] ;
    $pnums = explode(', ',$numbers[$topnum]);
     



    
     foreach($pnums  as $pnum){
          $pselections = $select->selectwithnum($pnum);
         
          
          foreach($pselections as $pselection){
               $comms = $pselection->AungAung;
          $newkyat = $comms + $kyat;
               $select->updatePrice($newkyat, $pnum);
          }
          }
//    }
    
     
     

   


}elseif(in_array("T", $textSplit)){
     echo "T is true";
}elseif(in_array("E", $textSplit)){
     echo "E is true";
}elseif(in_array("S", $textSplit)){
     echo "A is true";
}elseif(in_array("W", $textSplit)){
     echo "W is true";
}elseif(in_array("N", $textSplit)){
     echo "N is true";
}


HTTP::redirect("/");



?>